# 类加载

## 为什么需要类加载
- 和c不同，编译之后没有link的过程
- link的过程就是在类加载的时候完成
- java程序可以装在在编译时并不知道或者尚未存在的类或者接口，并动态链接他们
动态加载: 只在需要时候的加载，不是一开始全部加载
- java类文件并不一定真的是一个磁盘文件，可以来自网络，甚至可以来自内存

## java类加载步骤


![类加载步骤](../java/img/classLoaderProcess.png)
- loading 找到类的二进制字节流
- linking 
    - 校验(verification) 文件格式，元数据，字节码，符号应用
    - 准备(preparation) 为类型所需要的数据分配存贮空间
    - 解析（resolution) 将符号链接转变为实际链接 比如 继承，把引用解析成实际的引用
- 初始化(initilization)
    - 类型的静态初始化 static


## 类初始化时机
- New, getstatic, putstatic, invokestatic
- 使用java.lang.reflect包的方法对类进行反射调用的时候
- 当虚拟机启东市，用户需要制定一个要执行的主类,main 方法，虚拟机会先初始化这个主类

## 类加载机制
- parent delegation 双亲委派机制
![parent delegation](../java/img/parent_delegation.png)